version: "3.8"
services:
    nodeserver:
        build:
            context: ./app
        ports:
            - "5000:5000"
    nginx:
        restart: always
        build:
            context: ./nginx
        ports:
            - "80:80"
    api-node:
        restart: always
        build:
            context: ./api-node/api-node
        ports:
            - "3000:3000"
    serveur_ssh:
        build: 
            context: ./serveur_ssh
        ports:
        - "22:22"
      
    raspberry_pi_1:
        build:
            dockerfile: Dockerfile
            args:
                pi_folder: pi1
        ports:
        - "8081:80"

    raspberry_pi_2:
        build:
            dockerfile: Dockerfile
            args:
                pi_folder: pi2
        ports:
        - "8082:80"

    raspberry_pi_3:
        build:
            dockerfile: Dockerfile
            args:
                pi_folder: pi3
        ports:
        - "8083:80"
